# Notifications plugin #

# Overview #

The Notifications plugin is a Deployit plugin that supports notifications as part of a deployment. Currently, only notifications via email are supported.

# Requirements #

* **Deployit requirements**
	* **Deployit**: version 3.7

# Installation #

Place the plugin JAR file into your `SERVER_HOME/plugins` directory. 

Also requires 'simple-java-mail-1.8.jar' in the `SERVER_HOME/lib` directory. This library is available from [Maven Central](http://search.maven.org/#search|ga|1|simple-java-mail-1.8).
	
# Configuration #

The appropriate settings for the start/end notifications emails are set by uncommenting the following values in SERVER_HOME/conf/deployit-defaults.properties and modifying the values as appropriate. Properties that are not present should simply be added if desired. 'Cc' and 'Bcc' are not required and may be set to empty.

	# Bcc
	notify.DeploymentStartNotification.bcc=Secret stakeholders <secret-stakeholders@acme.com>,secret-stakeholders2@acme.com
	# Cc
	notify.DeploymentStartNotification.cc=Not so important stakeholders <lesser-stakeholders@acme.com>
	# From
	notify.DeploymentStartNotification.from=deployit@acme.com
	# To
	notify.DeploymentStartNotification.to=Stakeholders <stakeholders@acme.com>

...and similarly for DeploymentEndNotification etc.

The above properties expect email addresses to be specified as "address" or "name <address>". 'To', 'Cc' and 'Bcc' accept comma-separated lists of email addresses.

The contents of the start/end emails can be modified by extracting the templates `notify/email/notify.DeploymentStartNotification.ftl` and/or `notify/email/notify.DeploymentEndNotification.ftl` from the plugin JAR into `SERVER_HOME/ext` and amending them as desired.

# Usage

The notification plugin supports sending of arbitrary emails via `notify.EmailDraft` and `notify.TemplateEmailDraft` Deployables in packages. For template emails, a FreeMarker template with the name of the Deployed needs to be available in `SERVER_HOME/ext/notify/email/<type-name>.ftl` (e.g. `notify.DeploymentEndNotification.ftl`).

Two additional standard options provided by the plugin are sending of "deployment start" and/or "deployment end" notifications. These are activated by checking the property `sendDeploymentStartNotification` (resp. `sendDeploymentEndNotification`) on the target environment.
