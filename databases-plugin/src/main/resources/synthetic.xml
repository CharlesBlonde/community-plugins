<?xml version="1.0" encoding="UTF-8"?>
<synthetic xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns="http://www.xebialabs.com/deployit/synthetic"
           xsi:schemaLocation="http://www.xebialabs.com/deployit/synthetic synthetic.xsd">

    <type type="sql.SqlScripts" extends="generic.Folder" description="Folder containing SQL scripts">
    </type>

    <type type="sql.ExecutedSqlScripts" extends="generic.ExecutedFolder" deployable-type="sql.SqlScripts" container-type="sql.SqlClient" description="SQL scripts executed on an SQL client">
        <property name="schema" required="false" description="If set, the schema to use. Falls back to the optional default schema set on the sql.SqlClient container" />
        <property name="username" required="false" description="If set, the user name to use. Falls back to the optional default user name set on the sql.SqlClient container" />
        <property name="password" password="true" required="false" description="If set, the password to use. Falls back to the optional default password set on the sql.SqlClient container" />
        <property name="createVerb" hidden="true" default="Run" />
        <property name="destroyVerb" hidden="true" default="Rollback" />
        <property name="executorScript" hidden="true" default="${deployed.container.clientWrapperScript}" />
        <property name="scriptRecognitionRegex" hidden="true" default="(?!.*-rollback\.sql)([0-9]*-.*)\.sql" />
        <property name="rollbackScriptRecognitionRegex" hidden="true" default="[0-9]*-(.*)-rollback\.sql" />
        <property name="rollbackScriptPostfix" hidden="true" default="-rollback.sql" />
    </type>

     <type type="sql.SqlClient" extends="generic.Container" description="Generic SQL client">
       <property name="schema" required="false" description="If set, the schema to use if none is set on the deployed sql.ExecutedSqlScripts"/>
       <property name="username" required="false" description="If set, the user name to use if none is set on the deployed sql.ExecutedSqlScripts"/>
       <property name="password" password="true"  required="false" description="If set, the password to use if none is set on the deployed sql.ExecutedSqlScripts"/>
       <property name="clientWrapperScript" required="false" description="The OS-specific wrapper script that calls the SQL client"/>
    </type>

    <type type="sql.OracleClient" extends="sql.SqlClient" description="Oracle SQL*Plus client">
        <property name="oraHome" description="The home directory for SQL*Plus" />
        <property name="clientWrapperScript" hidden="true" default="sql/OracleClient" />
    </type>

    <type type="sql.MySqlClient" extends="sql.SqlClient" description="MySQL client">
        <property name="mySqlHome" description="The home directory for MySQL" />
        <property name="clientWrapperScript" hidden="true" default="sql/MySqlClient" />
    </type>

    <type type="sql.Db2Client" extends="sql.SqlClient" description="IBM DB2 client">
        <property name="db2Home" description="The home directory for DB2" />
        <property name="clientWrapperScript" hidden="true" default="sql/Db2Client" />

        <!-- DB2 uses OS-level usernames and passwords and does not support a schema command line argument -->
        <property name="schema" hidden="true" required="false" />
        <property name="username" hidden="true" required="false" />
        <property name="password" hidden="true" password="true" required="false" />
    </type>
</synthetic>
